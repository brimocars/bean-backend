import{r as o,j as e,s as d,g as u,c as p,N as h}from"./Navbar-DzggDwEA.js";async function m(t,s){try{return(await(await fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:s})})).json()).token}catch(a){return console.log(`login: ${a}`),{error:a.message}}}async function g(t,s,a){try{if((await fetch("/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:s,accessCode:a})})).status!==201)throw new Error("failed")}catch(n){return console.log(`login: ${n}`),{error:n.message}}}async function x(t,s,a){const n=await m(t,s);n.error||(a(!1),d(n))}function j({setShowLogin:t}){const[s,a]=o.useState(""),[n,i]=o.useState("");return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"column",children:[e.jsxs("div",{className:"row",children:[e.jsx("label",{htmlFor:"username",children:"Username:"}),e.jsx("input",{type:"text",name:"username",value:s,onInput:r=>a(r.target.value),placeholder:"username"})]}),e.jsxs("div",{className:"row",children:[e.jsx("label",{htmlFor:"password",children:"Password:"}),e.jsx("input",{type:"password",name:"password",value:n,onInput:r=>i(r.target.value),placeholder:"password"})]}),e.jsx("button",{id:"login",onClick:()=>x(s,n,t),children:"Login"})]})})}async function w(t,s,a,n){await g(t,s,a),n(!1)}function f({setShowSignup:t}){const[s,a]=o.useState(""),[n,i]=o.useState(""),[r,l]=o.useState("");return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"column",children:[e.jsxs("div",{className:"row",children:[e.jsx("label",{htmlFor:"username",children:"Username:"}),e.jsx("input",{type:"text",name:"username",value:s,onInput:c=>a(c.target.value),placeholder:"username"})]}),e.jsxs("div",{className:"row",children:[e.jsx("label",{htmlFor:"password",children:"Password:"}),e.jsx("input",{type:"password",name:"password",value:n,onInput:c=>i(c.target.value),placeholder:"password"})]}),e.jsxs("div",{className:"row",children:[e.jsx("label",{htmlFor:"accessCode",children:"Access Code:"}),e.jsx("input",{type:"password",name:"accessCode",value:r,onInput:c=>l(c.target.value),placeholder:"access code"})]}),e.jsx("button",{id:"signup",onClick:()=>w(s,n,r,t),children:"Signup"})]})})}function S({token:t,setToken:s}){const[a,n]=o.useState(!1),[i,r]=o.useState(!1);if(o.useEffect(()=>{s(u())},[a]),!t)return a?e.jsx(j,{setShowLogin:n}):i?e.jsx(f,{setShowSignup:r}):e.jsxs("div",{id:"main-button-holder",children:[e.jsx("button",{onClick:()=>n(!0),children:"Login"}),e.jsx("button",{onClick:()=>r(!0),children:"Signup"})]})}function v(){const[t,s]=o.useState("");return e.jsxs("div",{children:[e.jsx(h,{token:t,setToken:s}),e.jsx(S,{token:t,setToken:s})]})}const y=()=>{p.createRoot(document.getElementById("root")).render(e.jsx(o.StrictMode,{children:e.jsx(v,{})}))};window.onload=y;
//# sourceMappingURL=loginPage-CxplePMt.js.map
