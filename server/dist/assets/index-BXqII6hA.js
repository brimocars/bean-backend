import{r,j as e,s as u,g as d,c as h,N as m}from"./Navbar-i9prp0rC.js";async function p(a,n){try{return(await(await fetch("/login",{method:"POST",body:JSON.stringify({username:a,password:n})})).json()).token}catch(t){return console.log(`login: ${t}`),{error:t.message}}}async function g(a,n,t){try{if((await fetch("/signup",{method:"POST",body:JSON.stringify({username:a,password:n,accessCode:t})})).status!==201)throw new Error("failed")}catch(s){return console.log(`login: ${s}`),{error:s.message}}}async function x(a,n,t){const s=await p(a,n);s.error||(t(!1),u(s))}function j({setShowLogin:a}){const[n,t]=r.useState(""),[s,c]=r.useState("");return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"column",children:[e.jsxs("div",{className:"row",children:[e.jsx("label",{htmlFor:"username",children:"Username:"}),e.jsx("input",{type:"text",name:"username",value:n,onInput:o=>t(o.target.value),placeholder:"username"})]}),e.jsxs("div",{className:"row",children:[e.jsx("label",{htmlFor:"password",children:"Password:"}),e.jsx("input",{type:"text",name:"password",value:s,onInput:o=>c(o.target.value),placeholder:"password"})]}),e.jsx("button",{id:"login",onClick:()=>x(n,s,a),children:"Login"})]})})}async function w(a,n,t,s){await g(a,n,t),s(!1)}function S({setShowSignup:a}){const[n,t]=r.useState(""),[s,c]=r.useState(""),[o,l]=r.useState("");return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"column",children:[e.jsxs("div",{className:"row",children:[e.jsx("label",{htmlFor:"username",children:"Username:"}),e.jsx("input",{type:"text",name:"username",value:n,onInput:i=>t(i.target.value),placeholder:"username"})]}),e.jsxs("div",{className:"row",children:[e.jsx("label",{htmlFor:"password",children:"Password:"}),e.jsx("input",{type:"text",name:"password",value:s,onInput:i=>c(i.target.value),placeholder:"password"})]}),e.jsxs("div",{className:"row",children:[e.jsx("label",{htmlFor:"accessCode",children:"Access Code:"}),e.jsx("input",{type:"text",name:"accessCode",value:o,onInput:i=>l(i.target.value),placeholder:"access code"})]}),e.jsx("button",{id:"signup",onClick:()=>w(n,s,o,a),children:"Signup"})]})})}function f(){const[a,n]=r.useState(!1),[t,s]=r.useState(!1),[c,o]=r.useState("");if(r.useEffect(()=>{o(d())},[a]),!c)return a?e.jsx(j,{setShowLogin:n}):t?e.jsx(S,{setShowSignup:s}):e.jsxs("div",{children:[e.jsx("button",{onClick:()=>n(!0),children:"Login"}),e.jsx("button",{onClick:()=>s(!0),children:"Signup"})]})}const v=()=>{h.createRoot(document.getElementById("root")).render(e.jsxs(r.StrictMode,{children:[e.jsx(m,{}),e.jsx(f,{})]}))};window.onload=v;
